(function(){$("input").each(function(){$(this).attr("class",$(this).attr("class")||"")});$('input[name="loginName"]').focus();$('input[name="loginName"]').select()})();(function(){$('input[type="text"],input[type="password"]').bind({"copy cut paste contextmenu":function(){return false}})})();(function(){var showbox=function(message){var box=$("div.err_box").find("span.point");$("#password, #confirm, #captcha").val("");$("#password").focus();if(box.length<1){$("div.err_box").append('<span class="point">'+message+"</span>");return}box.text(message)};$("#selectall").click(function(){if($(this).attr("checked")=="checked"){$("#roleselect").find("input[type='checkbox']").attr("checked",true)}else{$("#roleselect").find("input[type='checkbox']").attr("checked",false)}});$("#roleselect").click(function(){var flag=true;$(this).find("input[type='checkbox']").each(function(){if($(this).attr("checked")==undefined){$("#selectall").attr("checked",false);flag=false;return false}});if(flag){$("#selectall").attr("checked",true)}});$("#asst-relation-form").effectiveAndValidate({submitHandler:function(form){Encrypt.encrypt({timeout:45000,success:function(key,iv,res){$('input[name="tid"]').val(res.tid);var p=$("#password");p.val(Security.encryptHex(p.val(),key,iv));var c=$("#confirm");c.val(Security.encryptHex(c.val(),key,iv));form.submit()},error:function(key,iv,res){var message=res?"\u7f51\u7edc\u901a\u4fe1\u5f02\u5e38\uff0c\u6ce8\u518c\u5931\u8d25":"\u7f51\u7edc\u8fde\u63a5\u8d85\u65f6\uff0c\u6ce8\u518c\u5931\u8d25";showbox(message)}})},rules:{loginName:{required:true,byterangelength:[4,20],pattern:/^[\u4e00-\u9faf_0-9a-zA-Z-]+$/,pattern2:/^[\u4e00-\u9fafa-zA-Z].*$/,remote:{type:"POST",async:true,url:BASE+"/async/member/nickname.htm",data:{nickname:function(){return $('input[name="loginName"]').val()}},dataType:"json",dataFilter:function(json){var j=eval("("+json+")");if(!j){return false}return j.result+""}}},password:{required:true,rangelength:[6,16],pattern:/^[\x21-\x7e]+$/},confirm:{equalTo:'input[name="password"]'},asstAcctDesc:{maxlength:20}},messages:{loginName:{required:"\u8bf7\u8f93\u5165\u4f1a\u5458\u540d",byterangelength:"\u4f1a\u5458\u540d\u4e3a {0}\uff5e{1} \u4e2a\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u201c-\u201d \u548c\u4e0b\u5212\u7ebf\u6216\u8005 2\uff5e10 \u4e2a\u6c49\u5b57",pattern:"\u4f1a\u5458\u540d\u7531\u82f1\u6587\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u6c49\u5b57\u3001\u201c-\u201d \u548c\u4e0b\u5212\u7ebf\u7ec4\u6210",pattern2:"\u4f1a\u5458\u540d\u9700\u8981\u4ee5\u82f1\u6587\u5b57\u6bcd\u6216\u6c49\u5b57\u5f00\u5934",remote:"\u8be5\u4f1a\u5458\u540d\u5df2\u7ecf\u88ab\u5176\u4ed6\u4f1a\u5458\u4f7f\u7528\u4e86"},password:{required:"\u8bf7\u8f93\u5165\u5bc6\u7801",rangelength:"\u5bc6\u7801\u5e94\u5728 {0}\uff5e{1} \u4e2a\u5b57\u7b26\u5185",pattern:"\u5bc6\u7801\u4ec5\u5141\u8bb8\u6570\u5b57\u3001\u82f1\u6587\u5b57\u6bcd\u53ca\u7b26\u53f7"},confirm:{equalTo:"\u786e\u8ba4\u5bc6\u7801\u4e0e\u5bc6\u7801\u4e0d\u4e00\u81f4"},asstAcctDesc:{maxlength:"\u63cf\u8ff0\u4e0d\u80fd\u8d85\u8fc720\u4e2a\u6c49\u5b57"}},errorPlacement:function(error,element){element[0].showError(error.text())}},{wrapSelector:"div.row",inputErrorClass:"error",inputNormalClass:"",message:{defaultClass:"tips",errorClass:"tips-error"}})})();
