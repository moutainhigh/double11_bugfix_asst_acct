(function(a){a.fn.lazyload=function(c){var b={threshold:0,failurelimit:10,event:"scroll",effect:"show",container:window};c&&a.extend(b,c);var d=this;"scroll"==b.event&&a(b.container).bind("scroll",function(){var e=0;d.each(function(){if(!a.abovethetop(this,b)&&!a.leftofbegin(this,b))if(!a.belowthefold(this,b)&&!a.rightoffold(this,b))a(this).trigger("appear");else if(e++>b.failurelimit)return!1});var c=a.grep(d,function(a){return!a.loaded});d=a(c)});this.each(function(){var c=this;void 0==a(c).attr("original")&&
a(c).attr("original",a(c).attr("src"));a(c).one("appear",function(){this.loaded||a("<img />").bind("load",function(){a(c).hide().attr("src",a(c).attr("original"))[b.effect](b.effectspeed);c.loaded=!0}).attr("src",a(c).attr("original"))});"scroll"!=b.event&&a(c).bind(b.event,function(){c.loaded||a(c).trigger("appear")})});a(b.container).trigger(b.event);return this};a.belowthefold=function(c,b){return(b.container===void 0||b.container===window?a(window).height()+a(window).scrollTop():a(b.container).offset().top+
a(b.container).height())<=a(c).offset().top-b.threshold};a.rightoffold=function(c,b){return(b.container===void 0||b.container===window?a(window).width()+a(window).scrollLeft():a(b.container).offset().left+a(b.container).width())<=a(c).offset().left-b.threshold};a.abovethetop=function(c,b){return(b.container===void 0||b.container===window?a(window).scrollTop():a(b.container).offset().top)>=a(c).offset().top+b.threshold+a(c).height()};a.leftofbegin=function(c,b){return(b.container===void 0||b.container===
window?a(window).scrollLeft():a(b.container).offset().left)>=a(c).offset().left+b.threshold+a(c).width()};a.extend(a.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);
